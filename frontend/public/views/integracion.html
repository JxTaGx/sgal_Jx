<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Producción Agrícola</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/pages/integracion.css">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header__container">
                <h1 class="header__title">Gestión de Producción</h1>
            </div>
        </header>

        <nav class="navigation">
            <div class="navigation__container">
                <button class="navigation__tab navigation__tab--active" data-tab="create">Crear</button>
                <button class="navigation__tab" data-tab="view">Visualizar</button>
                <button class="navigation__tab" data-tab="update">Actualizar</button>
                <button class="navigation__tab" data-tab="enable">Habilitar</button>
                <button class="navigation__tab" data-tab="list">Listar</button>
                <button class="navigation__tab" data-tab="report">Reportes</button>
            </div>
        </nav>

        <main class="dashboard">
            <section class="dashboard__section dashboard__section--active" data-panel="create">

                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">add_circle</i>
                        Crear Nueva Producción
                    </h2>
                    <p class="dashboard__subtitle">Complete el formulario para registrar una nueva producción agrícola</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form dashboard__form--two-columns" data-form="create">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <input class="dashboard__input" type="text" data-field="production-id" readonly>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Responsable</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="responsible" required>
                                    <option value="">Seleccione un responsable</option>
                                    </select>
                                <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('user', '../views/register.html')" title="Agregar Nuevo Responsable">
                                    <i class="material-icons">person_add</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="responsible"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Nombre de Producción</label>
                            <input class="dashboard__input" type="text" data-field="name" required>
                            <span class="dashboard__error" data-error="name"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Cultivo</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="cultivation" required>
                                    <option value="">Seleccione un cultivo</option>
                                     </select>
                                 <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('cultivation', '../views/create-cultivo.html')" title="Agregar Nuevo Cultivo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="cultivation"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Ciclo de Cultivo</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="cycle" required>
                                    <option value="">Seleccione un ciclo</option>
                                     </select>
                                <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('cycle', '../views/create-ciclo-cultivo.html')" title="Agregar Nuevo Ciclo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="cycle"></span>
                        </div>

                        <div class="dashboard__form-group dashboard__form-group--full-width">
    <label class="dashboard__label">Sensores Asignados (Máx. 3)</label>
    <div class="dashboard__sensor-add-area">
        <select class="dashboard__select" data-field="available-sensors">
            <option value="">Seleccione un sensor para agregar...</option>
            </select>
        <button class="dashboard__button dashboard__button--icon" type="button"
                onclick="redirectToCreate('sensor', '../views/create-sensor.html')" title="Crear Nuevo Sensor">
            <i class="material-icons">add_circle</i>
        </button>
        <button class="dashboard__button dashboard__button--primary" type="button" data-action="add-selected-sensor">Agregar Sensor</button>
    </div>
    <div class="dashboard__selected-items-list" data-list="selected-sensors">
        <p>No hay sensores agregados.</p>
        </div>
    <span class="dashboard__error" data-error="sensors"></span> </div>

                        <div class="dashboard__form-group dashboard__form-group--full-width">
                            <label class="dashboard__label">Insumos</label>
                            <div class="dashboard__supply-selection">
                                <button class="dashboard__button dashboard__button--icon dashboard__button--inline" type="button"
                                        onclick="redirectToCreate('supply', '../views/create-insumo.html')" title="Crear Nuevo Insumo">
                                    <i class="material-icons">add_circle</i> Crear Insumo
                                </button>
                                <div class="dashboard__supply-add-area">
                                    <select class="dashboard__select" data-field="available-supplies">
                                        <option value="">Seleccione un insumo para agregar</option>
                                         </select>
                                    <input type="number" class="dashboard__input" placeholder="Cantidad" min="1" data-field="supply-quantity">
                                    <button class="dashboard__button dashboard__button--primary" type="button" data-action="add-selected-supply">Agregar</button>
                                </div>
                            </div>
                            <div class="dashboard__selected-supplies-list" data-list="selected-supplies">
                                <p>No hay insumos agregados.</p>
                                </div>
                            <span class="dashboard__error" data-error="supplies"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Fecha de Inicio</label>
                            <input class="dashboard__input" type="date" data-field="start-date" required>
                            <span class="dashboard__error" data-error="start-date"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Fecha Estimada de Fin</label>
                            <input class="dashboard__input" type="date" data-field="end-date" required>
                            <span class="dashboard__error" data-error="end-date"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Inversión Estimada</label>
                            <input class="dashboard__input" type="text" data-field="investment" readonly>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Meta Estimada</label>
                            <input class="dashboard__input" type="text" data-field="goal" readonly>
                        </div>

                        <div class="dashboard__form-actions">
                            <a href="home.html"> <button class="dashboard__button dashboard__button--tertiary" type="button" data-action="cancel">Volver</button>
                            </a>
                            <button class="dashboard__button dashboard__button--save" type="button" data-action="save-draft">Guardar Borrador</button>
                            <button class="dashboard__button dashboard__button--create" type="submit" disabled data-action="create">Crear Producción</button>
                        </div>

                    </form>
                </div>
            </section>

            <section class="dashboard__section" data-panel="view">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">visibility</i>
                        Visualizar Producción
                    </h2>
                    <p class="dashboard__subtitle">Busque una producción por su ID para ver los detalles</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="view">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <div class="dashboard__result dashboard__result--hidden" data-result="view">
                        <div class="dashboard__info-section">
                            <h3 class="dashboard__section-title">Información General</h3>
                            <div class="dashboard__info-grid" data-info="basic">
                                </div>
                        </div>

                        <div class="dashboard__info-section">
                            <h3 class="dashboard__section-title">Métricas Clave (Simuladas)</h3>
                            <div class="dashboard__metrics-grid">
                                <div class="dashboard__metric-card">
                                    <div class="dashboard__metric-value" data-metric="health">--%</div>
                                    <div class="dashboard__metric-label">Salud del Cultivo</div>
                                    <div class="dashboard__metric-trend">
                                        </div>
                                </div>
                                <div class="dashboard__metric-card">
                                    <div class="dashboard__metric-value" data-metric="growth">--cm</div>
                                    <div class="dashboard__metric-label">Crecimiento Promedio</div>
                                     <div class="dashboard__metric-trend">
                                        </div>
                                </div>
                                <div class="dashboard__metric-card">
                                    <div class="dashboard__metric-value" data-metric="yield">--%</div>
                                    <div class="dashboard__metric-label">Rendimiento Estimado</div>
                                    <div class="dashboard__metric-trend">
                                        </div>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard__info-section">
                            <h3 class="dashboard__section-title">Análisis de Datos (Simulados)</h3>
                            <p class="dashboard__notice">Nota: Los gráficos muestran datos simulados y no reflejan lecturas reales de sensores.</p>
                            <div class="dashboard__charts-grid">
                                <div class="dashboard__chart-container">
                                    <h4 class="dashboard__chart-title">Humedad del Suelo</h4>
                                    <canvas data-chart="humidity" height="200"></canvas>
                                </div>
                                <div class="dashboard__chart-container">
                                    <h4 class="dashboard__chart-title">Temperatura Ambiente</h4>
                                    <canvas data-chart="temperature" height="200"></canvas>
                                </div>
                                <div class="dashboard__chart-container">
                                    <h4 class="dashboard__chart-title">Niveles de Nutrientes</h4>
                                    <canvas data-chart="nutrients" height="200"></canvas>
                                </div>
                                <div class="dashboard__chart-container">
                                    <h4 class="dashboard__chart-title">Progreso de Crecimiento</h4>
                                    <canvas data-chart="growth" height="200"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard__info-section">
                            <h3 class="dashboard__section-title">Estado de Sensores Asignados</h3>
                             <p class="dashboard__notice">Nota: Muestra el estado configurado del sensor, no lecturas en tiempo real.</p>
                            <div class="dashboard__sensors-grid" data-info="sensors">
                                </div>
                        </div>

                         <div class="dashboard__info-section">
                            <h3 class="dashboard__section-title">Insumos Asignados</h3>
                            <div data-info="supplies"> </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="update">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">edit</i>
                        Actualizar Producción
                    </h2>
                    <p class="dashboard__subtitle">Busque una producción para actualizar sus datos e insumos</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="search-update">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <form class="dashboard__form dashboard__form--two-columns dashboard__form--hidden" data-form="update">
                        </form>
                </div>
            </section>

            <section class="dashboard__section" data-panel="enable">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">toggle_on</i>
                        Habilitar/Deshabilitar
                    </h2>
                    <p class="dashboard__subtitle">Gestione el estado de las producciones</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="enable">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <div class="dashboard__result dashboard__result--hidden" data-result="enable">
                        <div class="dashboard__result-header">
                            <h3 class="dashboard__result-title">Estado de la Producción</h3>
                        </div>
                        <div class="dashboard__result-content" data-content="status">
                            </div>
                        <div class="dashboard__result-actions">
                            <button class="dashboard__button dashboard__button--accent" data-action="toggle-status" disabled>Cambiar Estado</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="list">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">list_alt</i>
                        Listar Producciones
                    </h2>
                    <p class="dashboard__subtitle">Visualice y gestione todas las producciones existentes</p>
                </div>

                <div class="dashboard__widget">
                    <div class="dashboard__list-controls">
                        <div class="dashboard__search">
                            <i class="material-icons dashboard__search-icon">search</i>
                            <input class="dashboard__search-input" type="text" data-field="search" placeholder="Buscar por ID, nombre, cultivo, ciclo, responsable...">
                        </div>
                        <div class="dashboard__filter">
                            <label class="dashboard__filter-label">Filtrar por Estado:</label>
                            <select class="dashboard__filter-select" data-field="filter-status">
                                <option value="all">Todos</option>
                                <option value="active">Activo</option>
                                <option value="inactive">Inactivo</option>
                            </select>
                        </div>
                    </div>

                    <div class="dashboard__table-container">
                        <table class="dashboard__table">
                            <thead class="dashboard__table-head">
                                <tr class="dashboard__table-row">
                                    <th class="dashboard__table-header">ID</th>
                                    <th class="dashboard__table-header">Nombre</th>
                                    <th class="dashboard__table-header">Cultivo</th>
                                    <th class="dashboard__table-header">Ciclo</th>
                                    <th class="dashboard__table-header">Estado</th>
                                    <th class="dashboard__table-header">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="dashboard__table-body" data-list="productions">
                                <tr><td colspan="6" class="dashboard__table-cell dashboard__table-cell--loading">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="dashboard__pagination">
                        <button class="dashboard__pagination-button" data-action="prev-page" disabled>
                            <i class="material-icons">chevron_left</i>
                        </button>
                        <span class="dashboard__pagination-info" data-info="page">Página - de -</span>
                        <button class="dashboard__pagination-button" data-action="next-page" disabled>
                            <i class="material-icons">chevron_right</i>
                        </button>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="report">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">description</i>
                        Generar Reporte (Simulado)
                    </h2>
                    <p class="dashboard__subtitle">Genere reportes personalizados de las producciones</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="report">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Período</label>
                            <div class="dashboard__date-range">
                                <div class="dashboard__date-field">
                                    <label class="dashboard__sublabel">Fecha Inicio</label>
                                    <input class="dashboard__input" type="date" data-field="start-date" required>
                                </div>
                                <div class="dashboard__date-field">
                                    <label class="dashboard__sublabel">Fecha Fin</label>
                                    <input class="dashboard__input" type="date" data-field="end-date" required>
                                </div>
                            </div>
                            <span class="dashboard__error" data-error="date-range"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Formato</label>
                            <div class="dashboard__radio-group">
                                <label class="dashboard__radio">
                                    <input type="radio" name="format" value="excel" checked>
                                    <span class="dashboard__radio-label">
                                        <i class="material-icons">grid_on</i> Excel
                                    </span>
                                </label>
                                <label class="dashboard__radio">
                                    <input type="radio" name="format" value="pdf">
                                    <span class="dashboard__radio-label">
                                        <i class="material-icons">picture_as_pdf</i> PDF
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div class="dashboard__form-actions">
                            <button class="dashboard__button dashboard__button--primary" type="submit">Generar Reporte</button>
                        </div>
                    </form>
                </div>
            </section>
        </main>

        <div class="modal" data-modal="add-item">
            <div class="modal__overlay" data-action="close-modal"></div>
            <div class="modal__content">
                <div class="modal__header">
                    <h3 class="modal__title" data-modal-title>Agregar Nuevo Elemento</h3>
                    <button class="modal__close" data-action="close-modal">&times;</button>
                </div>
                <div class="modal__body" data-modal-body>
                    </div>
                <div class="modal__footer">
                    <button class="dashboard__button dashboard__button--secondary" data-action="cancel-modal">Cancelar</button>
                    <button class="dashboard__button dashboard__button--primary" data-action="save-modal">Guardar</button>
                </div>
            </div>
        </div>

        <div class="snackbar" data-snackbar>
            <div class="snackbar__content">
                <span class="snackbar__message" data-snackbar-message></span>
                <button class="snackbar__close" data-action="close-snackbar">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </div>

    <script src="../js/pages/integracion.js"></script>
</body>
</html>