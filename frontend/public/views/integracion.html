<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Producción Agrícola</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/pages/integracion.css">
</head>

<body>
    <div class="app">
        <header class="header">
            <div class="header__container">
                <h1 class="header__title">Gestión de Producción</h1>
            </div>
        </header>

        <nav class="navigation">
            <div class="navigation__container">
                <button class="navigation__tab navigation__tab--active" data-tab="create">Crear</button>
                <button class="navigation__tab" data-tab="view">Visualizar</button>
                <button class="navigation__tab" data-tab="update">Actualizar</button>
                <button class="navigation__tab" data-tab="enable">Habilitar</button>
                <button class="navigation__tab" data-tab="list">Listar</button>
                <button class="navigation__tab" data-tab="report">Reportes</button>
            </div>
        </nav>

        <main class="dashboard">
            <section class="dashboard__section dashboard__section--active" data-panel="create">

                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">add_circle</i>
                        Crear Nueva Producción
                    </h2>
                    <p class="dashboard__subtitle">Complete el formulario para registrar una nueva producción agrícola</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form dashboard__form--two-columns" data-form="create">

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <input class="dashboard__input" type="text" data-field="production-id" readonly>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Nombre de Producción</label>
                            <input class="dashboard__input" type="text" data-field="name" required>
                            <span class="dashboard__error" data-error="name"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Responsable</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="responsible" required>
                                    <option value="">Seleccione un responsable</option>
                                </select>
                                <button class="dashboard__button dashboard__button--icon" type="button" onclick="redirectToCreate('user', '../views/register.html')" title="Agregar Nuevo Responsable">
                                    <i class="material-icons">person_add</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="responsible"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Cultivo</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="cultivation" required>
                                    <option value="">Seleccione un cultivo</option>
                                </select>
                                <button class="dashboard__button dashboard__button--icon" type="button" onclick="redirectToCreate('cultivation', '../views/create-cultivo.html')" title="Agregar Nuevo Cultivo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="cultivation"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Ciclo de Cultivo</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="cycle" required>
                                    <option value="">Seleccione un ciclo</option>
                                </select>
                                <button class="dashboard__button dashboard__button--icon" type="button" onclick="redirectToCreate('cycle', '../views/create-ciclo-cultivo.html')" title="Agregar Nuevo Ciclo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="cycle"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Fecha de Inicio</label>
                            <input class="dashboard__input" type="date" data-field="start-date" required>
                            <span class="dashboard__error" data-error="start-date"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Fecha Estimada de Fin</label>
                            <input class="dashboard__input" type="date" data-field="end-date" required>
                            <span class="dashboard__error" data-error="end-date"></span>
                        </div>

                        <div class="dashboard__form-group dashboard__form-group--full-width">
                            <label class="dashboard__label">Sensores Asignados (Máx. 3)</label>
                            <div class="dashboard__sensor-add-area">
                                <select class="dashboard__select" data-field="available-sensors">
                                    <option value="">Seleccione un sensor para agregar...</option>
                                </select>
                                <input type="number" class="dashboard__input" data-field="sensor-quantity" placeholder="Cantidad" min="1" max="3" title="Ingrese la cantidad (1-3)">
                                <button class="dashboard__button dashboard__button--icon" type="button" onclick="redirectToCreate('sensor', '../views/create-sensor.html')" title="Crear Nuevo Sensor">
                                    <i class="material-icons">add_circle</i>
                                </button>
                                <button class="dashboard__button dashboard__button--primary" type="button" data-action="add-selected-sensor">Agregar Sensor</button>
                            </div>
                            <div class="dashboard__selected-items-list" data-list="selected-sensors">
                                <p>No hay sensores agregados.</p>
                            </div>
                            <span class="dashboard__error" data-error="sensors"></span>
                        </div>

                        <div class="dashboard__form-group dashboard__form-group--full-width">
                            <label class="dashboard__label">Insumos</label>
                            <div class="dashboard__supply-selection">
                                <button class="dashboard__button dashboard__button--icon dashboard__button--inline" type="button" onclick="redirectToCreate('supply', '../views/create-insumo.html')" title="Crear Nuevo Insumo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                                <div class="dashboard__supply-add-area">
                                    <select class="dashboard__select" data-field="available-supplies">
                                        <option value="">Seleccione un insumo para agregar</option>
                                    </select>
                                    <input type="number" class="dashboard__input" placeholder="Cantidad" min="1" data-field="supply-quantity">
                                    <button class="dashboard__button dashboard__button--primary" type="button" data-action="add-selected-supply">Agregar</button>
                                </div>
                            </div>
                            <div class="dashboard__selected-items-list" data-list="selected-supplies">
                                <p>No hay insumos agregados.</p>
                            </div>
                            <span class="dashboard__error" data-error="supplies"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Inversión Estimada</label>
                            <input class="dashboard__input" type="text" data-field="investment" readonly>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Meta Estimada</label>
                            <input class="dashboard__input" type="text" data-field="goal" readonly>
                        </div>

                        <div class="dashboard__form-actions">
                            <a href="home.html">
                                <button class="dashboard__button dashboard__button--tertiary" type="button" data-action="cancel">Volver</button>
                            </a>
                            <button class="dashboard__button dashboard__button--secondary" type="button" data-action="save-draft">Guardar Borrador</button>
                            <button class="dashboard__button dashboard__button--primary" type="submit" disabled data-action="create">Crear Producción</button>
                        </div>

                    </form>
                </div>
            </section>

            <section class="dashboard__section" data-panel="view">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">dashboard</i>
                        Dashboard Analítico de Producción
                    </h2>
                    <p class="dashboard__subtitle">Visualización completa de métricas y rendimientos</p>
                </div>
            
                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="view">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group dashboard__input-group--search">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">
                                    <i class="material-icons">search</i> Cargar Dashboard
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>
            
                    <div class="dashboard__result dashboard__result--hidden" data-result="view">
                        <!-- Header Superior -->
                        <div class="analytics-header">
                            <div class="analytics-header__info">
                                <h3 class="analytics-header__title" data-info="production-name">Producción de Tomate</h3>
                                <div class="analytics-header__meta">
                                    <span class="analytics-header__badge" data-info="production-status">Activo</span>
                                    <span class="analytics-header__period" data-info="production-dates">Ene 2023 - Mar 2023</span>
                                </div>
                            </div>
                            <div class="analytics-header__actions">
                                <button class="dashboard__button dashboard__button--secondary">
                                    <i class="material-icons">print</i> Exportar
                                </button>
                                <button class="dashboard__button dashboard__button--secondary">
                                    <i class="material-icons">share</i> Compartir
                                </button>
                            </div>
                        </div>
            
                        <!-- KPI Cards -->
                        <div class="kpi-grid">
                            <div class="kpi-card kpi-card--primary">
                                <div class="kpi-card__icon">
                                    <i class="material-icons">monetization_on</i>
                                </div>
                                <div class="kpi-card__content">
                                    <span class="kpi-card__label">Inversión Total</span>
                                    <span class="kpi-card__value" data-kpi="investment">$12,450.00</span>
                                    <span class="kpi-card__trend trend-up">
                                        <i class="material-icons">trending_up</i> 12%
                                    </span>
                                </div>
                            </div>
                            
                            <div class="kpi-card kpi-card--success">
                                <div class="kpi-card__icon">
                                    <i class="material-icons">show_chart</i>
                                </div>
                                <div class="kpi-card__content">
                                    <span class="kpi-card__label">Rendimiento</span>
                                    <span class="kpi-card__value" data-kpi="yield">78%</span>
                                    <span class="kpi-card__trend trend-up">
                                        <i class="material-icons">trending_up</i> 5%
                                    </span>
                                </div>
                            </div>
                            
                            <div class="kpi-card kpi-card--warning">
                                <div class="kpi-card__icon">
                                    <i class="material-icons">local_shipping</i>
                                </div>
                                <div class="kpi-card__content">
                                    <span class="kpi-card__label">Insumos Utilizados</span>
                                    <span class="kpi-card__value" data-kpi="supplies">24/32</span>
                                    <span class="kpi-card__trend trend-down">
                                        <i class="material-icons">trending_down</i> 8%
                                    </span>
                                </div>
                            </div>
                            
                            <div class="kpi-card kpi-card--info">
                                <div class="kpi-card__icon">
                                    <i class="material-icons">sensors</i>
                                </div>
                                <div class="kpi-card__content">
                                    <span class="kpi-card__label">Sensores Activos</span>
                                    <span class="kpi-card__value" data-kpi="sensors">3/5</span>
                                    <span class="kpi-card__trend trend-neutral">
                                        <i class="material-icons">trending_flat</i> 0%
                                    </span>
                                </div>
                            </div>
                        </div>
            
                        <!-- Primera Fila de Gráficos -->
                        <div class="analytics-row">
                            <div class="analytics-card analytics-card--large">
                                <div class="analytics-card__header">
                                    <h4 class="analytics-card__title">
                                        <i class="material-icons">bar_chart</i> Rendimiento por Semana
                                    </h4>
                                    <select class="dashboard__select dashboard__select--small">
                                        <option>Últimos 30 días</option>
                                        <option>Últimos 3 meses</option>
                                        <option>Toda la producción</option>
                                    </select>
                                </div>
                                <div id="performanceChart" class="google-chart"></div>
                            </div>
                            
                            <div class="analytics-card">
                                <div class="analytics-card__header">
                                    <h4 class="analytics-card__title">
                                        <i class="material-icons">pie_chart</i> Distribución de Costos
                                    </h4>
                                </div>
                                <div id="costDistributionChart" class="google-chart"></div>
                            </div>
                        </div>
            
                        <!-- Segunda Fila de Gráficos -->
                        <div class="analytics-row">
                            <div class="analytics-card">
                                <div class="analytics-card__header">
                                    <h4 class="analytics-card__title">
                                        <i class="material-icons">show_chart</i> Tendencias Climáticas
                                    </h4>
                                </div>
                                <div id="climateTrendsChart" class="google-chart"></div>
                            </div>
                            
                            <div class="analytics-card">
                                <div class="analytics-card__header">
                                    <h4 class="analytics-card__title">
                                        <i class="material-icons">water_drop</i> Humedad del Suelo
                                    </h4>
                                </div>
                                <div id="soilMoistureChart" class="google-chart"></div>
                            </div>
                            
                            <div class="analytics-card">
                                <div class="analytics-card__header">
                                    <h4 class="analytics-card__title">
                                        <i class="material-icons">thermostat</i> Temperatura Ambiente
                                    </h4>
                                </div>
                                <div id="temperatureChart" class="google-chart"></div>
                            </div>
                        </div>
            
                        <!-- Tercera Fila - Detalles -->
                        <div class="details-row">
                            <div class="details-card">
                                <div class="details-card__header">
                                    <h4 class="details-card__title">
                                        <i class="material-icons">person</i> Responsable
                                    </h4>
                                </div>
                                <div class="user-details" data-info="responsible">
                                    <div class="user-details__avatar">
                                        <i class="material-icons">account_circle</i>
                                    </div>
                                    <div class="user-details__info">
                                        <span class="user-details__name">Juan Pérez</span>
                                        <span class="user-details__role">Ingeniero Agrónomo</span>
                                        <div class="user-details__meta">
                                            <span><i class="material-icons">email</i> juan.perez@empresa.com</span>
                                            <span><i class="material-icons">phone</i> +57 310 123 4567</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="details-card">
                                <div class="details-card__header">
                                    <h4 class="details-card__title">
                                        <i class="material-icons">inventory</i> Insumos (Top 5)
                                    </h4>
                                </div>
                                <div class="supplies-table" data-info="supplies">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Insumo</th>
                                                <th>Cantidad</th>
                                                <th>Responsable</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Datos dinámicos aquí -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="details-card">
                                <div class="details-card__header">
                                    <h4 class="details-card__title">
                                        <i class="material-icons">sensors</i> Sensores Activos
                                    </h4>
                                </div>
                                <div class="sensors-grid" data-info="sensors">
                                    <!-- Datos dinámicos aquí -->
                                </div>
                            </div>
                        </div>
            
                        <!-- Cuarta Fila - Tabla Completa -->
                        <div class="analytics-card analytics-card--full">
                            <div class="analytics-card__header">
                                <h4 class="analytics-card__title">
                                    <i class="material-icons">table_chart</i> Datos Financieros Completos
                                </h4>
                            </div>
                            <div id="financialTable" class="google-chart"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="update">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">edit</i>
                        Actualizar Producción
                    </h2>
                    <p class="dashboard__subtitle">Busque una producción para actualizar sus datos e insumos</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="search-update">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <form class="dashboard__form dashboard__form--two-columns dashboard__form--hidden" data-form="update">
                    </form>
                </div>
            </section>

            <section class="dashboard__section" data-panel="enable">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">toggle_on</i>
                        Habilitar/Deshabilitar
                    </h2>
                    <p class="dashboard__subtitle">Gestione el estado de las producciones</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="enable">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <div class="dashboard__result dashboard__result--hidden" data-result="enable">
                        <div class="dashboard__result-header">
                            <h3 class="dashboard__result-title">Estado de la Producción</h3>
                        </div>
                        <div class="dashboard__result-content" data-content="status">
                        </div>
                        <div class="dashboard__result-actions">
                            <button class="dashboard__button dashboard__button--accent" data-action="toggle-status" disabled>Cambiar Estado</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="list">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">list_alt</i>
                        Listar Producciones
                    </h2>
                    <p class="dashboard__subtitle">Visualice y gestione todas las producciones existentes</p>
                </div>

                <div class="dashboard__widget">
                    <div class="dashboard__list-controls">
                        <div class="dashboard__search">
                            <i class="material-icons dashboard__search-icon">search</i>
                            <input class="dashboard__search-input" type="text" data-field="search" placeholder="Buscar por ID, nombre, cultivo, ciclo, responsable...">
                        </div>
                        <div class="dashboard__filter">
                            <label class="dashboard__filter-label">Filtrar por Estado:</label>
                            <select class="dashboard__filter-select" data-field="filter-status">
                                <option value="all">Todos</option>
                                <option value="active">Activo</option>
                                <option value="inactive">Inactivo</option>
                            </select>
                        </div>
                    </div>

                    <div class="dashboard__table-container">
                        <table class="dashboard__table">
                            <thead class="dashboard__table-head">
                                <tr class="dashboard__table-row">
                                    <th class="dashboard__table-header">ID</th>
                                    <th class="dashboard__table-header">Nombre</th>
                                    <th class="dashboard__table-header">Cultivo</th>
                                    <th class="dashboard__table-header">Ciclo</th>
                                    <th class="dashboard__table-header">Estado</th>
                                    <th class="dashboard__table-header">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="dashboard__table-body" data-list="productions">
                                <tr>
                                    <td colspan="6" class="dashboard__table-cell dashboard__table-cell--loading">Cargando...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="dashboard__pagination">
                        <button class="dashboard__pagination-button" data-action="prev-page" disabled>
                            <i class="material-icons">chevron_left</i>
                        </button>
                        <span class="dashboard__pagination-info" data-info="page">Página - de -</span>
                        <button class="dashboard__pagination-button" data-action="next-page" disabled>
                            <i class="material-icons">chevron_right</i>
                        </button>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="report">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">description</i>
                        Generar Reporte (Simulado)
                    </h2>
                    <p class="dashboard__subtitle">Genere reportes personalizados de las producciones</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="report">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Período</label>
                            <div class="dashboard__date-range">
                                <div class="dashboard__date-field">
                                    <label class="dashboard__sublabel">Fecha Inicio</label>
                                    <input class="dashboard__input" type="date" data-field="start-date" required>
                                </div>
                                <div class="dashboard__date-field">
                                    <label class="dashboard__sublabel">Fecha Fin</label>
                                    <input class="dashboard__input" type="date" data-field="end-date" required>
                                </div>
                            </div>
                            <span class="dashboard__error" data-error="date-range"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Formato</label>
                            <div class="dashboard__radio-group">
                                <label class="dashboard__radio">
                                    <input type="radio" name="format" value="excel" checked>
                                    <span class="dashboard__radio-label">
                                        <i class="material-icons">grid_on</i> Excel
                                    </span>
                                </label>
                                <label class="dashboard__radio">
                                    <input type="radio" name="format" value="pdf">
                                    <span class="dashboard__radio-label">
                                        <i class="material-icons">picture_as_pdf</i> PDF
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div class="dashboard__form-actions">
                            <button class="dashboard__button dashboard__button--primary" type="submit">Generar Reporte</button>
                        </div>
                    </form>
                </div>
            </section>
        </main>

        <div class="modal" data-modal="add-item">
            <div class="modal__overlay" data-action="close-modal"></div>
            <div class="modal__content">
                <div class="modal__header">
                    <h3 class="modal__title" data-modal-title>Agregar Nuevo Elemento</h3>
                    <button class="modal__close" data-action="close-modal">&times;</button>
                </div>
                <div class="modal__body" data-modal-body>
                </div>
                <div class="modal__footer">
                    <button class="dashboard__button dashboard__button--secondary" data-action="cancel-modal">Cancelar</button>
                    <button class="dashboard__button dashboard__button--primary" data-action="save-modal">Guardar</button>
                </div>
            </div>
        </div>

        <div class="snackbar" data-snackbar>
            <div class="snackbar__content">
                <span class="snackbar__message" data-snackbar-message></span>
                <button class="snackbar__close" data-action="close-snackbar">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </div>

    <script src="../js/pages/integracion.js"></script>
</body>

</html>