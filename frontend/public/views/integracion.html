<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Producción Agrícola</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/pages/integracion.css">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header__container">
                <h1 class="header__title">Gestión de Producción</h1>
            </div>
        </header>

        <nav class="navigation">
            <div class="navigation__container">
                <button class="navigation__tab navigation__tab--active" data-tab="create">Crear</button>
                <button class="navigation__tab" data-tab="view">Visualizar</button>
                <button class="navigation__tab" data-tab="update">Actualizar</button>
                <button class="navigation__tab" data-tab="enable">Habilitar</button>
                <button class="navigation__tab" data-tab="list">Listar</button>
                <button class="navigation__tab" data-tab="report">Reportes</button>
            </div>
        </nav>

        <main class="dashboard">
            <section class="dashboard__section dashboard__section--active" data-panel="create">

                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">add_circle</i>
                        Crear Nueva Producción
                    </h2>
                    <p class="dashboard__subtitle">Complete el formulario para registrar una nueva producción agrícola</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form dashboard__form--two-columns" data-form="create">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <input class="dashboard__input" type="text" data-field="production-id" readonly>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Responsable</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="responsible" required>
                                    <option value="">Seleccione un responsable</option>
                                    </select>
                                <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('user', '../views/register.html')" title="Agregar Nuevo Responsable">
                                    <i class="material-icons">person_add</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="responsible"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Nombre de Producción</label>
                            <input class="dashboard__input" type="text" data-field="name" required>
                            <span class="dashboard__error" data-error="name"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Cultivo</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="cultivation" required>
                                    <option value="">Seleccione un cultivo</option>
                                     </select>
                                 <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('cultivation', '../views/create-cultivo.html')" title="Agregar Nuevo Cultivo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="cultivation"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Ciclo de Cultivo</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="cycle" required>
                                    <option value="">Seleccione un ciclo</option>
                                     </select>
                                <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('cycle', '../views/create-ciclo-cultivo.html')" title="Agregar Nuevo Ciclo">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="cycle"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Sensores (Máx. 3)</label>
                            <div class="dashboard__select-wrapper">
                                <select class="dashboard__select" data-field="sensors" multiple size="3" required>
                                     </select>
                                <button class="dashboard__button dashboard__button--icon" type="button"
                                        onclick="redirectToCreate('sensor', '../views/create-sensor.html')" title="Crear Nuevo Sensor">
                                    <i class="material-icons">add_circle</i>
                                </button>
                            </div>
                            <span class="dashboard__error" data-error="sensors"></span>
                        </div>

                        <div class="dashboard__form-group dashboard__form-group--full-width">
                            <label class="dashboard__label">Insumos</label>
                            <div class="dashboard__supply-selection">
                                <button class="dashboard__button dashboard__button--icon dashboard__button--inline" type="button"
                                        onclick="redirectToCreate('supply', '../views/create-insumo.html')" title="Crear Nuevo Insumo">
                                    <i class="material-icons">add_circle</i> Crear Insumo
                                </button>
                                <div class="dashboard__supply-add-area">
                                    <select class="dashboard__select" data-field="available-supplies">
                                        <option value="">Seleccione un insumo para agregar</option>
                                         </select>
                                    <input type="number" class="dashboard__input" placeholder="Cantidad" min="1" data-field="supply-quantity">
                                    <button class="dashboard__button dashboard__button--primary" type="button" data-action="add-selected-supply">Agregar</button>
                                </div>
                            </div>
                            <div class="dashboard__selected-supplies-list" data-list="selected-supplies">
                                <p>No hay insumos agregados.</p>
                                </div>
                            <span class="dashboard__error" data-error="supplies"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Fecha de Inicio</label>
                            <input class="dashboard__input" type="date" data-field="start-date" required>
                            <span class="dashboard__error" data-error="start-date"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Fecha Estimada de Fin</label>
                            <input class="dashboard__input" type="date" data-field="end-date" required>
                            <span class="dashboard__error" data-error="end-date"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Inversión Estimada</label>
                            <input class="dashboard__input" type="text" data-field="investment" readonly>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Meta Estimada</label>
                            <input class="dashboard__input" type="text" data-field="goal" readonly>
                        </div>

                        <div class="dashboard__form-actions">
                            <a href="home.html"> <button class="dashboard__button dashboard__button--tertiary" type="button" data-action="cancel">Volver</button>
                            </a>
                            <button class="dashboard__button dashboard__button--save" type="button" data-action="save-draft">Guardar Borrador</button>
                            <button class="dashboard__button dashboard__button--create" type="submit" disabled data-action="create">Crear Producción</button>
                        </div>

                    </form>
                </div>
            </section>

            <section class="dashboard__section" data-panel="view">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">dashboard</i>
                        Visualizar Producción - Dashboard General
                    </h2>
                    <p class="dashboard__subtitle">Resumen general del estado de las producciones agrícolas</p>
                </div>

                <div class="dashboard__grid dashboard__grid--kpi">
                    <div class="dashboard__widget dashboard__widget--kpi">
                        <h3 class="dashboard__widget-title">Producciones Activas</h3>
                        <div class="dashboard__widget-value" data-kpi="active-productions">--</div>
                        <i class="material-icons dashboard__widget-icon">agriculture</i>
                    </div>
                    <div class="dashboard__widget dashboard__widget--kpi">
                        <h3 class="dashboard__widget-title">Cultivos Únicos</h3>
                        <div class="dashboard__widget-value" data-kpi="unique-crops">--</div>
                         <i class="material-icons dashboard__widget-icon">grass</i>
                    </div>
                    <div class="dashboard__widget dashboard__widget--kpi">
                        <h3 class="dashboard__widget-title">Inversión Total (Insumos)</h3>
                        <div class="dashboard__widget-value" data-kpi="total-investment">$ --</div>
                         <i class="material-icons dashboard__widget-icon">payments</i>
                    </div>
                     <div class="dashboard__widget dashboard__widget--kpi dashboard__widget--warning">
                        <h3 class="dashboard__widget-title">Ganancia/Pérdida</h3>
                        <div class="dashboard__widget-value" data-kpi="profit-loss">N/A*</div>
                        <p class="dashboard__widget-note">*Se requieren datos de ingresos</p>
                         <i class="material-icons dashboard__widget-icon">trending_up</i>
                    </div>
                </div>

                 <div class="dashboard__grid dashboard__grid--charts-main">
                    <div class="dashboard__widget">
                        <h3 class="dashboard__widget-title">Rendimiento Estimado por Cultivo (Último Ciclo)</h3>
                        <div class="dashboard__chart-container" style="height: 300px;">
                            <canvas data-chart="yield-by-crop"></canvas>
                             <p class="dashboard__chart-empty-message" data-chart-empty="yield-by-crop" style="display: none;">No hay datos de rendimiento para mostrar.</p>
                        </div>
                    </div>
                     <div class="dashboard__widget">
                        <h3 class="dashboard__widget-title">Distribución de Estados de Producción</h3>
                        <div class="dashboard__chart-container" style="height: 300px;">
                            <canvas data-chart="production-status-distribution"></canvas>
                            <p class="dashboard__chart-empty-message" data-chart-empty="production-status-distribution" style="display: none;">No hay datos de estado para mostrar.</p>
                        </div>
                    </div>
                 </div>

                 <div class="dashboard__grid dashboard__grid--yield-progress">
                    <div class="dashboard__widget">
                        <h3 class="dashboard__widget-title">Rendimiento por Ciclo (Promedio)</h3>
                         <div class="dashboard__gauge-container">
                             <div class="dashboard__gauge" data-gauge="yield-cycle-avg">
                                 <div class="dashboard__gauge-value">--%</div>
                                 <div class="dashboard__gauge-bar"></div>
                             </div>
                         </div>
                    </div>
                     <div class="dashboard__widget">
                        <h3 class="dashboard__widget-title">Rendimiento por Usuario (Promedio)</h3>
                         <div class="dashboard__gauge-container">
                            <div class="dashboard__gauge" data-gauge="yield-user-avg">
                                <div class="dashboard__gauge-value">--%</div>
                                <div class="dashboard__gauge-bar"></div>
                            </div>
                        </div>
                    </div>
                     <div class="dashboard__widget">
                         <h3 class="dashboard__widget-title">Progreso Ciclos Activos</h3>
                         <div class="dashboard__progress-list" data-list="cycle-progress">
                             <p>No hay ciclos activos para mostrar progreso.</p>
                             </div>
                     </div>
                 </div>

                <div class="dashboard__grid dashboard__grid--tables">
                    <div class="dashboard__widget dashboard__widget--table">
                        <h3 class="dashboard__widget-title">Detalle de Inversión por Producción</h3>
                        <div class="dashboard__table-container">
                            <table class="dashboard__table">
                                <thead>
                                    <tr>
                                        <th>Producción (ID)</th>
                                        <th>Nombre</th>
                                        <th>Responsable</th>
                                        <th>Inversión Estimada (Insumos)</th>
                                    </tr>
                                </thead>
                                <tbody data-table="investment-details">
                                    <tr><td colspan="4">Cargando datos...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="dashboard__widget dashboard__widget--table">
                        <h3 class="dashboard__widget-title">Evolución Comparativa (Ejemplo)</h3>
                         <div class="dashboard__chart-container" style="height: 250px;">
                             <canvas data-chart="comparative-evolution"></canvas>
                             <p class="dashboard__chart-empty-message" data-chart-empty="comparative-evolution" style="display: none;">No hay datos históricos suficientes.</p>
                         </div>
                    </div>
                </div>

                 <div class="dashboard__widget">
                    <h3 class="dashboard__widget-title">Resumen de Sensores (Valores Actuales Promedio)</h3>
                    <div class="dashboard__grid dashboard__grid--sensors-summary">
                        <div class="dashboard__sensor-summary">
                            <i class="material-icons">thermostat</i>
                            <span>Temperatura</span>
                            <strong data-sensor-summary="temperature">-- °C</strong>
                        </div>
                        <div class="dashboard__sensor-summary">
                             <i class="material-icons">opacity</i>
                             <span>Humedad</span>
                            <strong data-sensor-summary="humidity">-- %</strong>
                        </div>
                         <div class="dashboard__sensor-summary">
                            <i class="material-icons">eco</i>
                            <span>Nutrientes</span>
                            <strong data-sensor-summary="nutrients">-- ppm</strong>
                        </div>
                        <div class="dashboard__sensor-summary">
                             <i class="material-icons">wb_sunny</i>
                            <span>Luz</span>
                            <strong data-sensor-summary="light">-- lux</strong>
                        </div>
                    </div>
                 </div>
            </section>

            <section class="dashboard__section" data-panel="update">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">edit</i>
                        Actualizar Producción
                    </h2>
                    <p class="dashboard__subtitle">Busque una producción para actualizar sus datos e insumos</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="search-update">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <form class="dashboard__form dashboard__form--two-columns dashboard__form--hidden" data-form="update">
                        </form>
                </div>
            </section>

            <section class="dashboard__section" data-panel="enable">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">toggle_on</i>
                        Habilitar/Deshabilitar
                    </h2>
                    <p class="dashboard__subtitle">Gestione el estado de las producciones</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="enable">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">ID de Producción</label>
                            <div class="dashboard__input-group">
                                <input class="dashboard__input" type="text" data-field="production-id" required placeholder="Ej: prod-1">
                                <button class="dashboard__button dashboard__button--primary" type="submit">Buscar</button>
                            </div>
                            <span class="dashboard__error" data-error="production-id"></span>
                        </div>
                    </form>

                    <div class="dashboard__result dashboard__result--hidden" data-result="enable">
                        <div class="dashboard__result-header">
                            <h3 class="dashboard__result-title">Estado de la Producción</h3>
                        </div>
                        <div class="dashboard__result-content" data-content="status">
                            </div>
                        <div class="dashboard__result-actions">
                            <button class="dashboard__button dashboard__button--accent" data-action="toggle-status" disabled>Cambiar Estado</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="list">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">list_alt</i>
                        Listar Producciones
                    </h2>
                    <p class="dashboard__subtitle">Visualice y gestione todas las producciones existentes</p>
                </div>

                <div class="dashboard__widget">
                    <div class="dashboard__list-controls">
                        <div class="dashboard__search">
                            <i class="material-icons dashboard__search-icon">search</i>
                            <input class="dashboard__search-input" type="text" data-field="search" placeholder="Buscar por ID, nombre, cultivo, ciclo, responsable...">
                        </div>
                        <div class="dashboard__filter">
                            <label class="dashboard__filter-label">Filtrar por Estado:</label>
                            <select class="dashboard__filter-select" data-field="filter-status">
                                <option value="all">Todos</option>
                                <option value="active">Activo</option>
                                <option value="inactive">Inactivo</option>
                            </select>
                        </div>
                    </div>

                    <div class="dashboard__table-container">
                        <table class="dashboard__table">
                            <thead class="dashboard__table-head">
                                <tr class="dashboard__table-row">
                                    <th class="dashboard__table-header">ID</th>
                                    <th class="dashboard__table-header">Nombre</th>
                                    <th class="dashboard__table-header">Cultivo</th>
                                    <th class="dashboard__table-header">Ciclo</th>
                                    <th class="dashboard__table-header">Estado</th>
                                    <th class="dashboard__table-header">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="dashboard__table-body" data-list="productions">
                                <tr><td colspan="6" class="dashboard__table-cell dashboard__table-cell--loading">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="dashboard__pagination">
                        <button class="dashboard__pagination-button" data-action="prev-page" disabled>
                            <i class="material-icons">chevron_left</i>
                        </button>
                        <span class="dashboard__pagination-info" data-info="page">Página - de -</span>
                        <button class="dashboard__pagination-button" data-action="next-page" disabled>
                            <i class="material-icons">chevron_right</i>
                        </button>
                    </div>
                </div>
            </section>

            <section class="dashboard__section" data-panel="report">
                <div class="dashboard__heading">
                    <h2 class="dashboard__title">
                        <i class="material-icons dashboard__icon">description</i>
                        Generar Reporte (Simulado)
                    </h2>
                    <p class="dashboard__subtitle">Genere reportes personalizados de las producciones</p>
                </div>

                <div class="dashboard__widget">
                    <form class="dashboard__form" data-form="report">
                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Período</label>
                            <div class="dashboard__date-range">
                                <div class="dashboard__date-field">
                                    <label class="dashboard__sublabel">Fecha Inicio</label>
                                    <input class="dashboard__input" type="date" data-field="start-date" required>
                                </div>
                                <div class="dashboard__date-field">
                                    <label class="dashboard__sublabel">Fecha Fin</label>
                                    <input class="dashboard__input" type="date" data-field="end-date" required>
                                </div>
                            </div>
                            <span class="dashboard__error" data-error="date-range"></span>
                        </div>

                        <div class="dashboard__form-group">
                            <label class="dashboard__label">Formato</label>
                            <div class="dashboard__radio-group">
                                <label class="dashboard__radio">
                                    <input type="radio" name="format" value="excel" checked>
                                    <span class="dashboard__radio-label">
                                        <i class="material-icons">grid_on</i> Excel
                                    </span>
                                </label>
                                <label class="dashboard__radio">
                                    <input type="radio" name="format" value="pdf">
                                    <span class="dashboard__radio-label">
                                        <i class="material-icons">picture_as_pdf</i> PDF
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div class="dashboard__form-actions">
                            <button class="dashboard__button dashboard__button--primary" type="submit">Generar Reporte</button>
                        </div>
                    </form>
                </div>
            </section>
        </main>

        <div class="modal" data-modal="add-item">
            <div class="modal__overlay" data-action="close-modal"></div>
            <div class="modal__content">
                <div class="modal__header">
                    <h3 class="modal__title" data-modal-title>Agregar Nuevo Elemento</h3>
                    <button class="modal__close" data-action="close-modal">&times;</button>
                </div>
                <div class="modal__body" data-modal-body>
                    </div>
                <div class="modal__footer">
                    <button class="dashboard__button dashboard__button--secondary" data-action="cancel-modal">Cancelar</button>
                    <button class="dashboard__button dashboard__button--primary" data-action="save-modal">Guardar</button>
                </div>
            </div>
        </div>

        <div class="snackbar" data-snackbar>
            <div class="snackbar__content">
                <span class="snackbar__message" data-snackbar-message></span>
                <button class="snackbar__close" data-action="close-snackbar">
                    <i class="material-icons">close</i>
                </button>
            </div>
        </div>
    </div>

    <script src="../js/pages/integracion.js"></script>
</body>
</html>